<div fxLayout="row" fxLayoutAlign="center center" class="pt-84 pb-48 header-1 ">
    Sign up in DUPAY
</div>

<!-- Email form -->
<form [formGroup]="emailForm">
    <div *ngIf="!isEmailFormDone" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="12px"
        class="margin-auto  pb-124">

        <div>
            <mat-progress-bar *ngIf="isEmailLoading" fxLayout="row" fxLayoutAlign="center center" mode="indeterminate"
                color='primary' class="m-0"></mat-progress-bar>
            <mat-card class="p-36 " [class.mat-elevation-z4]="true">

                <div fxLayout="row" fxLayout.lt-md='column' fxLayoutAlign="center center"
                    fxLayoutAlign.lt-md="start center" fxLayoutGap="32px" fxLayoutGap.lt-md='12px'>



                    <!-- Email -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                email
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Email</mat-label>
                                <input type="email" matInput placeholder="Type in email" formControlName="email">
                                <mat-error *ngIf="emailForm.get('email').touched && emailForm.get('email').invalid">
                                    {{error_messages.email_error}}</mat-error>


                            </mat-form-field>
                        </div>
                    </div>





                </div>
                <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="16px" class='mt-24'>
                    <button type="submit" (click)='sendOTPtoEmail()' mat-raised-button color="primary"
                        class="w-260 h-40">Send OTP</button>



                </div>

            </mat-card>
        </div>
        <div>
            <a (click)='route([urlPaths.Authentication.Signin.url][0])'
                class="cursor-pointer link-color font-size-16">Back to login </a>
        </div>

    </div>
</form>
<!-- OTP form -->
<form [formGroup]="OTPForm">
    <div *ngIf="isEmailFormDone && !isOTPFormDone" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="12px"
        class="margin-auto pb-124">
        <div>
            <mat-progress-bar *ngIf="isOTPLoading" fxLayout="row" fxLayoutAlign="center center" mode="indeterminate"
                color='primary' class="m-0"></mat-progress-bar>

            <mat-card class="p-36 " [class.mat-elevation-z4]="true">

                <div fxLayout="row" fxLayout.lt-md='column' fxLayoutAlign="center center"
                    fxLayoutAlign.lt-md="start center" fxLayoutGap="32px" fxLayoutGap.lt-md='12px'>



                    <!-- OTP -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                fingerprint
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>OTP</mat-label>
                                <input type="text" matInput placeholder="Type in OTP" formControlName="otp">
                                <mat-error *ngIf="OTPForm.get('otp').touched && OTPForm.get('otp').invalid">
                                    {{error_messages.otp_error}}</mat-error>


                            </mat-form-field>
                        </div>
                    </div>





                </div>
                <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="16px" class='mt-24'>
                    <button type="submit" (click)='verifyOTP()' mat-raised-button color="primary"
                        class="w-260 h-40">Verify
                        OTP</button>
                    <button (click)='resendOtp()' mat-stroked-button color="primary" class="w-260 h-40">Resend
                        Otp</button>


                </div>

            </mat-card>
        </div>
        <div>
            <a (click)='route([urlPaths.Authentication.Signin.url][0])'
                class="cursor-pointer link-color font-size-16">Back to login </a>
        </div>


    </div>
</form>

<!-- Post Information Form -->


<div *ngIf="isEmailFormDone && isOTPFormDone" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="12px"
    class="margin-auto pb-124">
    <div>
        <mat-progress-bar *ngIf="isSignUpLoading" fxLayout="row" fxLayoutAlign="center center" mode="indeterminate"
            color='primary' class="m-0"></mat-progress-bar>
    </div>
    <mat-card class="p-36 " [class.mat-elevation-z4]="true">

        <div fxLayout="column" fxLayoutAlign="center start" fxLayoutGap="16px" class='pb-24 '>
            <div class='font-weight-950 font-size-24'>User Information</div>
            <mat-divider [inset]="true" class='pr-128'></mat-divider>
        </div>
        <form [formGroup]="signupform">
            <div fxLayout="row" fxLayout.lt-md='column' fxLayoutAlign="center start" fxLayoutAlign.lt-md="start center"
                fxLayoutGap="32px" fxLayoutGap.lt-md='12px'>

                <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="12px">
                    <!-- Name -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                perm_identity
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Name</mat-label>
                                <input type="text" matInput placeholder="Type in name" formControlName="name">


                                <mat-error
                                    *ngIf="signupform.get('name').touched && signupform.get('name').hasError('minlength')">
                                    {{error_messages.minimum_5}}</mat-error>
                                <mat-error
                                    *ngIf="signupform.get('name').touched && signupform.get('name').hasError('maxlength')">
                                    {{error_messages.maximum_20}}</mat-error>
                                <mat-error
                                    *ngIf="signupform.get('name').touched && signupform.get('name').hasError('required')">
                                    {{error_messages.empty_name}}</mat-error>

                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Password -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                lock
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Password</mat-label>
                                <input id='mysecretpassword1' type="password" matInput placeholder="Type in password "
                                    formControlName="password" [errorStateMatcher]="matcher" showHideInput>
                                <mat-icon class='cursor-pointer' matSuffix showHideTrigger="mysecretpassword1"
                                    [showHideStatus]="{id: 'mysecretpassword1',materialIcon:true }"></mat-icon>

                                <mat-error
                                    *ngIf="signupform.get('password').touched && signupform.get('password').invalid  && !signupform.hasError('not_matching')">
                                    {{error_messages.weak_password}}</mat-error>
                                <mat-error
                                    *ngIf="signupform.get('password').touched && signupform.hasError('not_matching') ">
                                    {{error_messages.password_mismatch}}</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- NID number -->
                    <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-button mt-12 pt-16">
                            <i class="material-icons-outlined">
                                credit_card
                            </i>
                        </div>
                        <div class='mb-12 mt-4'>
                            <div>
                                <button mat-stroked-button (click)="imgFileInput.click()"
                                    [ngClass]="!nid_file_valid ? 'w-224 h-60 button_error rejected-color' : 'w-224 h-60' ">

                                    <span *ngIf='!nid_filename'>Choose NID File</span>
                                    <span *ngIf='nid_filename'>{{nid_filename}}</span>
                                </button>
                                <input hidden type="file" #imgFileInput (change)="onNIDFileSelect($event)">
                                <div *ngIf="!nid_file_valid" class='font-size-12 px-8 rejected-color'>
                                    Choose png or jpeg file within 2MB</div>
                            </div>
                        </div>
                    </div>
                    <!-- Trade Insurance -->
                    <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-button mt-12 pt-16">
                            <i class="material-icons-outlined">
                                perm_identity
                            </i>
                        </div>
                        <div class='mb-12 mt-4'>

                            <div>
                                <button mat-stroked-button (click)="tradeFileInput.click()"
                                    [ngClass]="!trade_insurance_file_valid ? 'w-224 h-60 button_error rejected-color' : 'w-224 h-60' ">

                                    <span *ngIf='!trade_insurance_filename'>Choose Trade Insurance File</span>
                                    <span *ngIf='trade_insurance_filename'>{{trade_insurance_filename}}</span>
                                </button>
                                <input hidden type="file"  #tradeFileInput
                                    (change)="onTradeInsuranceFileSelect($event)">
                                <div *ngIf="!trade_insurance_file_valid" class='font-size-12 px-8 rejected-color'>
                                    Choose png or jpeg file within 2MB</div>
                            </div>
                        </div>
                    </div>
                </div>








                <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="12px">
                    <!-- USERNAME -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                smartphone
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>User Name</mat-label>
                                <input type="tel" matInput placeholder="Type in username" formControlName="username">
                                <mat-error
                                    *ngIf="signupform.get('username').touched && signupform.get('username').hasError('minlength')">
                                    {{error_messages.minimum_5}}</mat-error>
                                <mat-error
                                    *ngIf="signupform.get('username').touched && signupform.get('username').hasError('maxlength')">
                                    {{error_messages.maximum_20}}</mat-error>
                                <mat-error
                                    *ngIf="signupform.get('username').touched && signupform.get('username').hasError('required')">
                                    {{error_messages.username_error}}</mat-error>

                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Confirm Password -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                vpn_key
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Confirm Password</mat-label>
                                <input id='mysecretpassword2' type="password" matInput
                                    placeholder="Type in confirm password " formControlName="confirm_password"
                                    [errorStateMatcher]="matcher" showHideInput>
                                <mat-icon class='cursor-pointer' matSuffix showHideTrigger="mysecretpassword2"
                                    [showHideStatus]="{id: 'mysecretpassword2',materialIcon:true }"></mat-icon>
                                <mat-error
                                    *ngIf="signupform.get('confirm_password').touched && signupform.get('confirm_password').invalid  && !signupform.hasError('not_matching')">
                                    {{error_messages.weak_password}}</mat-error>
                                <mat-error
                                    *ngIf="signupform.get('confirm_password').touched && signupform.hasError('not_matching') ">
                                    {{error_messages.password_mismatch}}</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- Merchant type -->
                    <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center center" class="mat-icon-for-input">
                            <i class="material-icons-outlined ">
                                group
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Merchant type</mat-label>
                                <mat-select formControlName='merchant_type' disableOptionCentering>
                                    <mat-option *ngFor='let type of merchant_types | keyvalue' [value]='type.key'>
                                        {{type.value}}</mat-option>
                                </mat-select>
                                <mat-error
                                    *ngIf="signupform.get('merchant_type').touched && signupform.get('merchant_type').invalid">
                                    {{error_messages.merchant_type}}</mat-error>

                            </mat-form-field>

                        </div>
                    </div>
                </div>
            </div>
        </form>

        <div fxLayout="column" fxLayoutAlign="center start" fxLayoutGap="16px" class='py-24'>
            <div class='font-weight-950 font-size-24'>Merchant Account Information</div>
            <mat-divider [inset]="true"></mat-divider>
        </div>

        <form [formGroup]="merchantAccountForm">
            <div fxLayout="row" fxLayout.lt-md='column' fxLayoutAlign="center start" fxLayoutAlign.lt-md="start center"
                fxLayoutGap="32px" fxLayoutGap.lt-md='12px'>
                <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="12px">



                    <!-- accountName -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                perm_identity
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Account Name</mat-label>
                                <input type="text" matInput placeholder="Type in account name"
                                    formControlName="accountName">



                                <mat-error
                                    *ngIf="merchantAccountForm.get('accountName').touched && merchantAccountForm.get('accountName').hasError('required')">
                                    Enter Account name</mat-error>

                            </mat-form-field>
                        </div>
                    </div>
                    <!-- accountNumber -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                lock
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Account Number</mat-label>
                                <input type="text" matInput placeholder="Type in account number "
                                    formControlName="accountNumber">
                                <mat-error
                                    *ngIf="merchantAccountForm.get('accountNumber').touched && merchantAccountForm.get('accountNumber').hasError('required')">
                                    Enter Account Number</mat-error>
                            </mat-form-field>
                        </div>
                    </div>




                </div>

                <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="12px">


                    <!-- bankName -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                vpn_key
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Bank Name</mat-label>
                                <input type="text" matInput placeholder="Type in Bank Name " formControlName="bankName">
                                <mat-error
                                    *ngIf="merchantAccountForm.get('bankName').touched && merchantAccountForm.get('bankName').hasError('required')">
                                    Enter Bank Name</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <!-- branch -->
                    <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="12px">
                        <div fxLayout="column" fxLayoutAlign="center" class="mat-icon-for-input">
                            <i class="material-icons-outlined">
                                vpn_key
                            </i>
                        </div>
                        <div>
                            <mat-form-field appearance="outline" class='w-224'>
                                <mat-label>Branch Name</mat-label>
                                <input type="text" matInput placeholder="Type in Branch Name " formControlName="branch">
                                <mat-error
                                    *ngIf="merchantAccountForm.get('branch').touched && merchantAccountForm.get('branch').hasError('required')">
                                    Enter Branch Name</mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="16px" class='mt-24'>
            <button type="submit" (click)='onSignupSubmit()' mat-raised-button color="primary" class="w-240 h-40">Sign
                up</button>
            <button (click)='resendOtp()' mat-stroked-button color="primary" class="w-240 h-40">Resend
                Email</button>




        </div>

    </mat-card>
    <div>
        <a (click)='route([urlPaths.Authentication.Signin.url][0])' class="cursor-pointer link-color font-size-16">Back
            to login </a>
    </div>
</div>